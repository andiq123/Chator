"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[414],{8414:(b,l,o)=>{o.r(l),o.d(l,{EditModule:()=>U});var d=o(9808),g=o(4996),i=o(3075),t=o(5e3),u=o(3382),p=o(9874),f=o(8492),m=o(9224),h=o(7322),C=o(4015),P=o(7531),M=o(7423);function x(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"mat-card"),t.TgZ(2,"mat-card-title"),t._uU(3,"Edit Profile"),t.qZA(),t.TgZ(4,"form",2),t.NdJ("submit",function(){return t.CHM(e),t.oxw().onSubmit()}),t.TgZ(5,"mat-label"),t._uU(6,"Change Username:"),t.qZA(),t._UZ(7,"app-text-input",3),t.TgZ(8,"mat-label"),t._uU(9,"Change Description:"),t.qZA(),t._UZ(10,"textarea",4),t.TgZ(11,"mat-label"),t._uU(12,"Change Your Profile Pic:"),t.qZA(),t.TgZ(13,"div",5),t.TgZ(14,"div",6),t._UZ(15,"img",7),t.qZA(),t.TgZ(16,"div",8),t.TgZ(17,"button",9),t.NdJ("click",function(){return t.CHM(e),t.MAs(20).click()}),t._uU(18,"Choose File"),t.qZA(),t.TgZ(19,"input",10,11),t.NdJ("change",function(s){return t.CHM(e),t.oxw().onFileSelected(s)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"button",12),t._uU(22,"Submit Edit"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=a.ngIf,r=t.oxw();t.xp6(4),t.Q6J("formGroup",r.formGroup),t.xp6(3),t.Q6J("formControl",r.formGroup.controls.username)("label","Username"),t.xp6(8),t.Q6J("src",e.getPhotoUrl(),t.LSH)("alt",e.userName),t.xp6(6),t.Q6J("disabled",r.formGroup.invalid)}}const v=[{path:"",component:(()=>{class n{constructor(e,r,s,c){this.logginPersiter=e,this.usersService=r,this.fb=s,this.snackBar=c}ngOnInit(){this.loadUser()}loadUser(){this.logginPersiter.LoggedUser$.subscribe(e=>{!e||(this.LoggedUser=e,this.createForm())})}createForm(){this.formGroup=this.fb.group({username:[this.LoggedUser.userName,[i.kI.required,i.kI.minLength(6),i.kI.maxLength(20)]],description:[this.LoggedUser.description,i.kI.required]})}onFileSelected(e){return this.usersService.photoTest(e.target.files[0]).subscribe({next:s=>{this.logginPersiter.setLoggedUser(s),this.snackBar.success("Profile image updated successfully")},error:()=>{this.snackBar.error("Error updating user's profile")}})}onSubmit(){if(!this.LoggedUser)return;const{username:e,description:r}=this.formGroup.value,s={username:e,description:r};this.snackBar.info("Updating user's profile..."),this.usersService.updateUser(this.LoggedUser.id,s).subscribe({next:c=>{this.logginPersiter.setLoggedUser(c),this.snackBar.success("Profile updated successfully")},error:c=>{this.snackBar.error(c.error.message)}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.O),t.Y36(p.f),t.Y36(i.qu),t.Y36(f.c))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-profile"]],decls:1,vars:1,consts:[["class","edit",4,"ngIf"],[1,"edit"],[3,"formGroup","submit"],[3,"formControl","label"],["matInput","","placeholder","Enter your description here...","formControlName","description","cols","30","rows","5"],[1,"image-area"],[1,"image-holder"],[3,"src","alt"],[1,"image-upload"],["type","button","mat-raised-button","",3,"click"],["hidden","","type","file","id","file","accept","image/*",3,"change"],["fileInput",""],["mat-flat-button","","color","primary","type","submit",3,"disabled"]],template:function(e,r){1&e&&t.YNc(0,x,23,6,"div",0),2&e&&t.Q6J("ngIf",r.LoggedUser)},directives:[d.O5,m.a8,m.n5,i._Y,i.JL,i.sg,h.hX,C.t,i.JJ,i.oH,P.Nt,i.Fj,i.u,M.lW],styles:[".edit[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.edit[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{width:30%;padding:50px;border-radius:30px}.edit[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-flow:column;grid-gap:5px;gap:5px}.edit[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border:1px solid #8d8989;border-radius:20px;padding:10px;width:95%;margin-bottom:10px}.edit[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   app-text-input[_ngcontent-%COMP%]{width:100%}.edit[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .image-area[_ngcontent-%COMP%]{display:flex;flex-flow:row;align-items:center;grid-gap:10px;gap:10px}.edit[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .image-area[_ngcontent-%COMP%]   .image-holder[_ngcontent-%COMP%]{width:200px}.edit[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .image-area[_ngcontent-%COMP%]   .image-holder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:20px;object-fit:cover}"]}),n})()}];let O=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[d.ez,g.Bz.forChild(v)],g.Bz]}),n})();var Z=o(4466);let U=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[d.ez,O,Z.m]]}),n})()}}]);